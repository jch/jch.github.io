<!DOCTYPE html>
<html>
<head>
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<title>
Fuck Fixtures
</title>
<link href="../../../../assets/application-d2f36cb0fed8eb4314e72d8f93f02530.css" media="all" rel="stylesheet" type="text/css" />
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2747647-1']);
  _gaq.push(['_setSiteSpeedSampleRate', 100]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body class='container-fluid'>
<div class='full-width' id='wcc'>
<div id='header'>
<a href="../../../../index.html">whatcodecraves.com</a>
</div>

<div id='main'>
<div id="carbonads-container">
  <div class="carbonad">
    <div id="azcarbon"></div>
      <script type="text/javascript">
        var z = document.createElement("script");
        z.type = "text/javascript";
        z.async = true;
        z.src = "http://engine.carbonads.com/z/17311/azcarbon_2_1_0_VERT";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(z, s);
      </script>
    </div>
  </div>
<div class='post'>
<h1>Fuck Fixtures</h1>
<a href="http://news.ycombinator.com/submit" class="hn-share-button">Vote on HN</a>
<a href="https://twitter.com/share" class="twitter-share-button" data_via="whatcodecraves">Tweet</a>
<div class='g-plus' data-action='share' data-annontation='bubble'></div>
<p>When you first start testing a newly created application, fixtures
might seem very appealing.  They're easy to write, they make sense,
and they quickly create valid or invalid instances for you to test
with.  Unfortunately, fixtures don't scale with a growing project.
They quickly get out of hand, and you'll end up spending more time
fixing your fixtures than your tests and code.  So fuck you fixtures,
and good riddance.</p><p>Fixtures are the devil because:</p><ul>
<li>they're brittle.</li>
<li>they don't work well with complex association with foreign keys.</li>
<li>they don't change when your schema and models change.</li>
</ul><p>Rails 2 fixtures are nicer, but it's much of the same.  If you don't
believe me, just keep using them and you'll know what I'm talking
about at some point.</p><h2>A Valid Case</h2><p>One interesting case my friend came across the other day was using
fixtures for rspec tests.  As described above, I think model fixtures
for testing is both brittle and hard to maintain.  However, he was
running across the case:</p><pre><code>it "should save to the freakin database" do
  @some_model.save.should == true
  debugger
end
</code></pre><p>This test passes with flying colors...  But seeing is believing, and
if you login to the test database, you won't be seeing a saved
record.  This is generally a good thing because once the test is
finished, the transaction is rolled back, and you'll have clean data
independence between tests.  The downside is when you're testing
something like Sphinx that assumes there's stuff in the database to
work with, it won't work.  The above example will pass, and if you
break at the debugger line, @some_model.new_record? will be false.</p><h2>So What Now?</h2><p>Other than that valid case, most problems should be solvable by
stubbing and mocking.  If not, then refactor your code so that it is!
One particularly delicious piece of syntactic sugar called <a href="http://github.com/thoughtbot/factory_girl/tree/master">Factory
Girl</a>.  For a
short description of what it does, check out <a href="http://giantrobots.thoughtbot.com/2008/6/6/waiting-for-a-factory-girl">this blog
post</a>.</p>
</div>
<script src="../../../../assets/post-6546d1eaa44666cb1ab3152c118eceec.js" type="text/javascript"></script>
<script>
  //<![CDATA[
    hljs.initHighlightingOnLoad();
  //]]>
</script>
<script type='text/javascript'>
  // HackerNews
  (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.src = '//hnbutton.appspot.com/static/hn.js';
    s.parentNode.insertBefore(g, s);
  }(document, 'script'));

  // Twitter
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

  // Google Plus
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname  = 'whatcodecraves';
  var disqus_title      = 'Fuck Fixtures';
  var disqus_identifier = '/posts/2008/07/09/fuck-fixtures';


  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>
<div id='footer'>
<p>
Copyright Jerry Cheung 2007 - 2014 &nbsp;&nbsp;
<a href="https://github.com/jch/whatcoderaves.com">Source for this blog</a>
</p>
</div>
</div>
</body>
</html>
